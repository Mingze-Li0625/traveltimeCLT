<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />

<meta name="author" content="Mohamad Elmasri, Aurélie Labbe, Denis Larocque, Laurent Charlin and Éric Germain" />

<meta name="date" content="2021-03-09" />

<title>Introduction to traveltimeCLT: Predictive inference for travel time on transportation networks</title>

<script src="data:application/x-javascript;base64,JChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKXsKICAgIGlmICh0eXBlb2YgJCgnW2RhdGEtdG9nZ2xlPSJ0b29sdGlwIl0nKS50b29sdGlwID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgJCgnW2RhdGEtdG9nZ2xlPSJ0b29sdGlwIl0nKS50b29sdGlwKCk7CiAgICB9CiAgICBpZiAoJCgnW2RhdGEtdG9nZ2xlPSJwb3BvdmVyIl0nKS5wb3BvdmVyID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgJCgnW2RhdGEtdG9nZ2xlPSJwb3BvdmVyIl0nKS5wb3BvdmVyKCk7CiAgICB9Cn0pOwo="></script>
<link href="data:text/css;charset=utf-8,%0A%2Elightable%2Dminimal%20%7B%0Aborder%2Dcollapse%3A%20separate%3B%0Aborder%2Dspacing%3A%2016px%201px%3B%0Awidth%3A%20100%25%3B%0Amargin%2Dbottom%3A%2010px%3B%0A%7D%0A%2Elightable%2Dminimal%20td%20%7B%0Amargin%2Dleft%3A%205px%3B%0Amargin%2Dright%3A%205px%3B%0A%7D%0A%2Elightable%2Dminimal%20th%20%7B%0Amargin%2Dleft%3A%205px%3B%0Amargin%2Dright%3A%205px%3B%0A%7D%0A%2Elightable%2Dminimal%20thead%20tr%3Alast%2Dchild%20th%20%7B%0Aborder%2Dbottom%3A%202px%20solid%20%2300000050%3B%0Aempty%2Dcells%3A%20hide%3B%0A%7D%0A%2Elightable%2Dminimal%20tbody%20tr%3Afirst%2Dchild%20td%20%7B%0Apadding%2Dtop%3A%200%2E5em%3B%0A%7D%0A%2Elightable%2Dminimal%2Elightable%2Dhover%20tbody%20tr%3Ahover%20%7B%0Abackground%2Dcolor%3A%20%23f5f5f5%3B%0A%7D%0A%2Elightable%2Dminimal%2Elightable%2Dstriped%20tbody%20tr%3Anth%2Dchild%28even%29%20%7B%0Abackground%2Dcolor%3A%20%23f5f5f5%3B%0A%7D%0A%2Elightable%2Dclassic%20%7B%0Aborder%2Dtop%3A%200%2E16em%20solid%20%23111111%3B%0Aborder%2Dbottom%3A%200%2E16em%20solid%20%23111111%3B%0Awidth%3A%20100%25%3B%0Amargin%2Dbottom%3A%2010px%3B%0Amargin%3A%2010px%205px%3B%0A%7D%0A%2Elightable%2Dclassic%20tfoot%20tr%20td%20%7B%0Aborder%3A%200%3B%0A%7D%0A%2Elightable%2Dclassic%20tfoot%20tr%3Afirst%2Dchild%20td%20%7B%0Aborder%2Dtop%3A%200%2E14em%20solid%20%23111111%3B%0A%7D%0A%2Elightable%2Dclassic%20caption%20%7B%0Acolor%3A%20%23222222%3B%0A%7D%0A%2Elightable%2Dclassic%20td%20%7B%0Apadding%2Dleft%3A%205px%3B%0Apadding%2Dright%3A%205px%3B%0Acolor%3A%20%23222222%3B%0A%7D%0A%2Elightable%2Dclassic%20th%20%7B%0Apadding%2Dleft%3A%205px%3B%0Apadding%2Dright%3A%205px%3B%0Afont%2Dweight%3A%20normal%3B%0Acolor%3A%20%23222222%3B%0A%7D%0A%2Elightable%2Dclassic%20thead%20tr%3Alast%2Dchild%20th%20%7B%0Aborder%2Dbottom%3A%200%2E10em%20solid%20%23111111%3B%0A%7D%0A%2Elightable%2Dclassic%2Elightable%2Dhover%20tbody%20tr%3Ahover%20%7B%0Abackground%2Dcolor%3A%20%23F9EEC1%3B%0A%7D%0A%2Elightable%2Dclassic%2Elightable%2Dstriped%20tbody%20tr%3Anth%2Dchild%28even%29%20%7B%0Abackground%2Dcolor%3A%20%23f5f5f5%3B%0A%7D%0A%2Elightable%2Dclassic%2D2%20%7B%0Aborder%2Dtop%3A%203px%20double%20%23111111%3B%0Aborder%2Dbottom%3A%203px%20double%20%23111111%3B%0Awidth%3A%20100%25%3B%0Amargin%2Dbottom%3A%2010px%3B%0A%7D%0A%2Elightable%2Dclassic%2D2%20tfoot%20tr%20td%20%7B%0Aborder%3A%200%3B%0A%7D%0A%2Elightable%2Dclassic%2D2%20tfoot%20tr%3Afirst%2Dchild%20td%20%7B%0Aborder%2Dtop%3A%203px%20double%20%23111111%3B%0A%7D%0A%2Elightable%2Dclassic%2D2%20caption%20%7B%0Acolor%3A%20%23222222%3B%0A%7D%0A%2Elightable%2Dclassic%2D2%20td%20%7B%0Apadding%2Dleft%3A%205px%3B%0Apadding%2Dright%3A%205px%3B%0Acolor%3A%20%23222222%3B%0A%7D%0A%2Elightable%2Dclassic%2D2%20th%20%7B%0Apadding%2Dleft%3A%205px%3B%0Apadding%2Dright%3A%205px%3B%0Afont%2Dweight%3A%20normal%3B%0Acolor%3A%20%23222222%3B%0A%7D%0A%2Elightable%2Dclassic%2D2%20tbody%20tr%3Alast%2Dchild%20td%20%7B%0Aborder%2Dbottom%3A%203px%20double%20%23111111%3B%0A%7D%0A%2Elightable%2Dclassic%2D2%20thead%20tr%3Alast%2Dchild%20th%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23111111%3B%0A%7D%0A%2Elightable%2Dclassic%2D2%2Elightable%2Dhover%20tbody%20tr%3Ahover%20%7B%0Abackground%2Dcolor%3A%20%23F9EEC1%3B%0A%7D%0A%2Elightable%2Dclassic%2D2%2Elightable%2Dstriped%20tbody%20tr%3Anth%2Dchild%28even%29%20%7B%0Abackground%2Dcolor%3A%20%23f5f5f5%3B%0A%7D%0A%2Elightable%2Dmaterial%20%7B%0Amin%2Dwidth%3A%20100%25%3B%0Awhite%2Dspace%3A%20nowrap%3B%0Atable%2Dlayout%3A%20fixed%3B%0Afont%2Dfamily%3A%20Roboto%2C%20sans%2Dserif%3B%0Aborder%3A%201px%20solid%20%23EEE%3B%0Aborder%2Dcollapse%3A%20collapse%3B%0Amargin%2Dbottom%3A%2010px%3B%0A%7D%0A%2Elightable%2Dmaterial%20tfoot%20tr%20td%20%7B%0Aborder%3A%200%3B%0A%7D%0A%2Elightable%2Dmaterial%20tfoot%20tr%3Afirst%2Dchild%20td%20%7B%0Aborder%2Dtop%3A%201px%20solid%20%23EEE%3B%0A%7D%0A%2Elightable%2Dmaterial%20th%20%7B%0Aheight%3A%2056px%3B%0Apadding%2Dleft%3A%2016px%3B%0Apadding%2Dright%3A%2016px%3B%0A%7D%0A%2Elightable%2Dmaterial%20td%20%7B%0Aheight%3A%2052px%3B%0Apadding%2Dleft%3A%2016px%3B%0Apadding%2Dright%3A%2016px%3B%0Aborder%2Dtop%3A%201px%20solid%20%23eeeeee%3B%0A%7D%0A%2Elightable%2Dmaterial%2Elightable%2Dhover%20tbody%20tr%3Ahover%20%7B%0Abackground%2Dcolor%3A%20%23f5f5f5%3B%0A%7D%0A%2Elightable%2Dmaterial%2Elightable%2Dstriped%20tbody%20tr%3Anth%2Dchild%28even%29%20%7B%0Abackground%2Dcolor%3A%20%23f5f5f5%3B%0A%7D%0A%2Elightable%2Dmaterial%2Elightable%2Dstriped%20tbody%20td%20%7B%0Aborder%3A%200%3B%0A%7D%0A%2Elightable%2Dmaterial%2Elightable%2Dstriped%20thead%20tr%3Alast%2Dchild%20th%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23ddd%3B%0A%7D%0A%2Elightable%2Dmaterial%2Ddark%20%7B%0Amin%2Dwidth%3A%20100%25%3B%0Awhite%2Dspace%3A%20nowrap%3B%0Atable%2Dlayout%3A%20fixed%3B%0Afont%2Dfamily%3A%20Roboto%2C%20sans%2Dserif%3B%0Aborder%3A%201px%20solid%20%23FFFFFF12%3B%0Aborder%2Dcollapse%3A%20collapse%3B%0Amargin%2Dbottom%3A%2010px%3B%0Abackground%2Dcolor%3A%20%23363640%3B%0A%7D%0A%2Elightable%2Dmaterial%2Ddark%20tfoot%20tr%20td%20%7B%0Aborder%3A%200%3B%0A%7D%0A%2Elightable%2Dmaterial%2Ddark%20tfoot%20tr%3Afirst%2Dchild%20td%20%7B%0Aborder%2Dtop%3A%201px%20solid%20%23FFFFFF12%3B%0A%7D%0A%2Elightable%2Dmaterial%2Ddark%20th%20%7B%0Aheight%3A%2056px%3B%0Apadding%2Dleft%3A%2016px%3B%0Apadding%2Dright%3A%2016px%3B%0Acolor%3A%20%23FFFFFF60%3B%0A%7D%0A%2Elightable%2Dmaterial%2Ddark%20td%20%7B%0Aheight%3A%2052px%3B%0Apadding%2Dleft%3A%2016px%3B%0Apadding%2Dright%3A%2016px%3B%0Acolor%3A%20%23FFFFFF%3B%0Aborder%2Dtop%3A%201px%20solid%20%23FFFFFF12%3B%0A%7D%0A%2Elightable%2Dmaterial%2Ddark%2Elightable%2Dhover%20tbody%20tr%3Ahover%20%7B%0Abackground%2Dcolor%3A%20%23FFFFFF12%3B%0A%7D%0A%2Elightable%2Dmaterial%2Ddark%2Elightable%2Dstriped%20tbody%20tr%3Anth%2Dchild%28even%29%20%7B%0Abackground%2Dcolor%3A%20%23FFFFFF12%3B%0A%7D%0A%2Elightable%2Dmaterial%2Ddark%2Elightable%2Dstriped%20tbody%20td%20%7B%0Aborder%3A%200%3B%0A%7D%0A%2Elightable%2Dmaterial%2Ddark%2Elightable%2Dstriped%20thead%20tr%3Alast%2Dchild%20th%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23FFFFFF12%3B%0A%7D%0A%2Elightable%2Dpaper%20%7B%0Awidth%3A%20100%25%3B%0Amargin%2Dbottom%3A%2010px%3B%0Acolor%3A%20%23444%3B%0A%7D%0A%2Elightable%2Dpaper%20tfoot%20tr%20td%20%7B%0Aborder%3A%200%3B%0A%7D%0A%2Elightable%2Dpaper%20tfoot%20tr%3Afirst%2Dchild%20td%20%7B%0Aborder%2Dtop%3A%201px%20solid%20%2300000020%3B%0A%7D%0A%2Elightable%2Dpaper%20thead%20tr%3Alast%2Dchild%20th%20%7B%0Acolor%3A%20%23666%3B%0Avertical%2Dalign%3A%20bottom%3B%0Aborder%2Dbottom%3A%201px%20solid%20%2300000020%3B%0Aline%2Dheight%3A%201%2E15em%3B%0Apadding%3A%2010px%205px%3B%0A%7D%0A%2Elightable%2Dpaper%20td%20%7B%0Avertical%2Dalign%3A%20middle%3B%0Aborder%2Dbottom%3A%201px%20solid%20%2300000010%3B%0Aline%2Dheight%3A%201%2E15em%3B%0Apadding%3A%207px%205px%3B%0A%7D%0A%2Elightable%2Dpaper%2Elightable%2Dhover%20tbody%20tr%3Ahover%20%7B%0Abackground%2Dcolor%3A%20%23F9EEC1%3B%0A%7D%0A%2Elightable%2Dpaper%2Elightable%2Dstriped%20tbody%20tr%3Anth%2Dchild%28even%29%20%7B%0Abackground%2Dcolor%3A%20%2300000008%3B%0A%7D%0A%2Elightable%2Dpaper%2Elightable%2Dstriped%20tbody%20td%20%7B%0Aborder%3A%200%3B%0A%7D%0A" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<link href="data:text/css;charset=utf-8,body%20%7B%0Abackground%2Dcolor%3A%20%23fff%3B%0Amargin%3A%201em%20auto%3B%0Amax%2Dwidth%3A%20700px%3B%0Aoverflow%3A%20visible%3B%0Apadding%2Dleft%3A%202em%3B%0Apadding%2Dright%3A%202em%3B%0Afont%2Dfamily%3A%20%22Open%20Sans%22%2C%20%22Helvetica%20Neue%22%2C%20Helvetica%2C%20Arial%2C%20sans%2Dserif%3B%0Afont%2Dsize%3A%2014px%3B%0Aline%2Dheight%3A%201%2E35%3B%0A%7D%0A%23TOC%20%7B%0Aclear%3A%20both%3B%0Amargin%3A%200%200%2010px%2010px%3B%0Apadding%3A%204px%3B%0Awidth%3A%20400px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Aborder%2Dradius%3A%205px%3B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Afont%2Dsize%3A%2013px%3B%0Aline%2Dheight%3A%201%2E3%3B%0A%7D%0A%23TOC%20%2Etoctitle%20%7B%0Afont%2Dweight%3A%20bold%3B%0Afont%2Dsize%3A%2015px%3B%0Amargin%2Dleft%3A%205px%3B%0A%7D%0A%23TOC%20ul%20%7B%0Apadding%2Dleft%3A%2040px%3B%0Amargin%2Dleft%3A%20%2D1%2E5em%3B%0Amargin%2Dtop%3A%205px%3B%0Amargin%2Dbottom%3A%205px%3B%0A%7D%0A%23TOC%20ul%20ul%20%7B%0Amargin%2Dleft%3A%20%2D2em%3B%0A%7D%0A%23TOC%20li%20%7B%0Aline%2Dheight%3A%2016px%3B%0A%7D%0Atable%20%7B%0Amargin%3A%201em%20auto%3B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dcolor%3A%20%23DDDDDD%3B%0Aborder%2Dstyle%3A%20outset%3B%0Aborder%2Dcollapse%3A%20collapse%3B%0A%7D%0Atable%20th%20%7B%0Aborder%2Dwidth%3A%202px%3B%0Apadding%3A%205px%3B%0Aborder%2Dstyle%3A%20inset%3B%0A%7D%0Atable%20td%20%7B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dstyle%3A%20inset%3B%0Aline%2Dheight%3A%2018px%3B%0Apadding%3A%205px%205px%3B%0A%7D%0Atable%2C%20table%20th%2C%20table%20td%20%7B%0Aborder%2Dleft%2Dstyle%3A%20none%3B%0Aborder%2Dright%2Dstyle%3A%20none%3B%0A%7D%0Atable%20thead%2C%20table%20tr%2Eeven%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Ap%20%7B%0Amargin%3A%200%2E5em%200%3B%0A%7D%0Ablockquote%20%7B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Apadding%3A%200%2E25em%200%2E75em%3B%0A%7D%0Ahr%20%7B%0Aborder%2Dstyle%3A%20solid%3B%0Aborder%3A%20none%3B%0Aborder%2Dtop%3A%201px%20solid%20%23777%3B%0Amargin%3A%2028px%200%3B%0A%7D%0Adl%20%7B%0Amargin%2Dleft%3A%200%3B%0A%7D%0Adl%20dd%20%7B%0Amargin%2Dbottom%3A%2013px%3B%0Amargin%2Dleft%3A%2013px%3B%0A%7D%0Adl%20dt%20%7B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0Aul%20%7B%0Amargin%2Dtop%3A%200%3B%0A%7D%0Aul%20li%20%7B%0Alist%2Dstyle%3A%20circle%20outside%3B%0A%7D%0Aul%20ul%20%7B%0Amargin%2Dbottom%3A%200%3B%0A%7D%0Apre%2C%20code%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0Aborder%2Dradius%3A%203px%3B%0Acolor%3A%20%23333%3B%0Awhite%2Dspace%3A%20pre%2Dwrap%3B%20%0A%7D%0Apre%20%7B%0Aborder%2Dradius%3A%203px%3B%0Amargin%3A%205px%200px%2010px%200px%3B%0Apadding%3A%2010px%3B%0A%7D%0Apre%3Anot%28%5Bclass%5D%29%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Acode%20%7B%0Afont%2Dfamily%3A%20Consolas%2C%20Monaco%2C%20%27Courier%20New%27%2C%20monospace%3B%0Afont%2Dsize%3A%2085%25%3B%0A%7D%0Ap%20%3E%20code%2C%20li%20%3E%20code%20%7B%0Apadding%3A%202px%200px%3B%0A%7D%0Adiv%2Efigure%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0Aimg%20%7B%0Abackground%2Dcolor%3A%20%23FFFFFF%3B%0Apadding%3A%202px%3B%0Aborder%3A%201px%20solid%20%23DDDDDD%3B%0Aborder%2Dradius%3A%203px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Amargin%3A%200%205px%3B%0A%7D%0Ah1%20%7B%0Amargin%2Dtop%3A%200%3B%0Afont%2Dsize%3A%2035px%3B%0Aline%2Dheight%3A%2040px%3B%0A%7D%0Ah2%20%7B%0Aborder%2Dbottom%3A%204px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Apadding%2Dbottom%3A%202px%3B%0Afont%2Dsize%3A%20145%25%3B%0A%7D%0Ah3%20%7B%0Aborder%2Dbottom%3A%202px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Afont%2Dsize%3A%20120%25%3B%0A%7D%0Ah4%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23f7f7f7%3B%0Amargin%2Dleft%3A%208px%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Ah5%2C%20h6%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23ccc%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Aa%20%7B%0Acolor%3A%20%230033dd%3B%0Atext%2Ddecoration%3A%20none%3B%0A%7D%0Aa%3Ahover%20%7B%0Acolor%3A%20%236666ff%3B%20%7D%0Aa%3Avisited%20%7B%0Acolor%3A%20%23800080%3B%20%7D%0Aa%3Avisited%3Ahover%20%7B%0Acolor%3A%20%23BB00BB%3B%20%7D%0Aa%5Bhref%5E%3D%22http%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0Aa%5Bhref%5E%3D%22https%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0A%0Acode%20%3E%20span%2Ekw%20%7B%20color%3A%20%23555%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Edt%20%7B%20color%3A%20%23902000%3B%20%7D%20%0Acode%20%3E%20span%2Edv%20%7B%20color%3A%20%2340a070%3B%20%7D%20%0Acode%20%3E%20span%2Ebn%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Efl%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Ech%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Est%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Eco%20%7B%20color%3A%20%23888888%3B%20font%2Dstyle%3A%20italic%3B%20%7D%20%0Acode%20%3E%20span%2Eot%20%7B%20color%3A%20%23007020%3B%20%7D%20%0Acode%20%3E%20span%2Eal%20%7B%20color%3A%20%23ff0000%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Efu%20%7B%20color%3A%20%23900%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Eer%20%7B%20color%3A%20%23a61717%3B%20background%2Dcolor%3A%20%23e3d2d2%3B%20%7D%20%0A" rel="stylesheet" type="text/css" />




</head>

<body>




<h1 class="title toc-ignore">Introduction to traveltimeCLT: Predictive inference for travel time on transportation networks</h1>
<h4 class="author">Mohamad Elmasri, Aurélie Labbe, Denis Larocque, Laurent Charlin and Éric Germain</h4>
<h4 class="date">2021-03-09</h4>


<div id="TOC">
<ul>
<li><a href="#introduction"><span class="toc-section-number">1</span> Introduction</a></li>
<li><a href="#example-data-set-trips"><span class="toc-section-number">2</span> Example data set: <code>trips</code></a></li>
<li><a href="#statistical-models"><span class="toc-section-number">3</span> Statistical models</a><ul>
<li><a href="#calling-traveltimeclt"><span class="toc-section-number">3.1</span> Calling <code>traveltimeCLT</code></a></li>
<li><a href="#a-word-on-imputation"><span class="toc-section-number">3.2</span> A word on imputation</a></li>
<li><a href="#return-values"><span class="toc-section-number">3.3</span> Return values</a></li>
</ul></li>
<li><a href="#prediction"><span class="toc-section-number">4</span> Prediction</a><ul>
<li><a href="#calling-predict.traveltime-or-predict"><span class="toc-section-number">4.1</span> Calling <code>predict.traveltime</code> or <code>predict</code></a></li>
<li><a href="#return-values-1"><span class="toc-section-number">4.2</span> Return values</a></li>
</ul></li>
<li><a href="#model-comparison"><span class="toc-section-number">5</span> Model comparison</a></li>
<li><a href="#time-bins"><span class="toc-section-number">6</span> Time bins</a><ul>
<li><a href="#prediction-with-new-time-bins"><span class="toc-section-number">6.1</span> Prediction with new time bins</a></li>
</ul></li>
<li><a href="#references"><span class="toc-section-number">7</span> References</a></li>
</ul>
</div>

<div id="introduction" class="section level1">
<h1><span class="header-section-number">1</span> Introduction</h1>
<p>Mobility is vital to human activities, as it is an integral component of our economic and trade networks, social interactions, political ties, and our quality of life. Large-scale trip-level data, with temporal and spatial coverage, enable us to better diagnose transportation problems and develop efficient solutions, for instance, to increased congestion-levels. Such data is progressively available from global positioning systems (GPS) on mobile phones and other devices. At the heart of many such transportation problems is the estimation of travel time between locations.</p>
<p>This <code>traveltimeCLT</code> package provides a novel method for generating prediction intervals for travel time along a given route. By accounting for temporal-dependency in vehicle speeds, the parameters of the Gaussian asymptotic distribution for travel time normalized by distance are esimtated with less (or negligable) empirical bias compared to alternative methods.</p>
<p>This is a work in progress. For bugs and features, please refer to <a href="https://github.com/melmasri/traveltimeCLT/issues">here</a>.</p>
</div>
<div id="example-data-set-trips" class="section level1">
<h1><span class="header-section-number">2</span> Example data set: <code>trips</code></h1>
<p>This package includes a small data set (<code>trips</code>) that aggregates map-matched anonymized mobile phone GPS data collected in Quebec city in 2014 using the Mon Trajet smartphone application developed by <a href="https://brisksynergies.com/">Brisk Synergies Inc</a>. The precise duration of the time period is kept confidential.</p>
<p><code>trips</code> is used to explore methods offered in this package. Data similar to <code>trips</code> can be generated using other sources of GPS data, however, a preprocessing stage is necessary to map-match and aggregate the information up to the road segment (link) level. Such preprocessing is already performed on <code>trips</code>.</p>
<p><code>traveltimeCLT</code> does not perform this preprocessing stage, and the software cannot make use of raw GPS data.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(traveltimeCLT)
<span class="kw">data</span>(trips)
<span class="kw">head</span>(trips)
<span class="co">#&gt;   tripID linkID timeBin     speed duration_secs distance_meters</span>
<span class="co">#&gt; 1   2700  10469 Weekday  5.431914     13.000000        70.61488</span>
<span class="co">#&gt; 2   2700  10444 Weekday  9.219505     18.927792       174.50487</span>
<span class="co">#&gt; 3   2700  10460 Weekday  9.052796      8.589937        77.76295</span>
<span class="co">#&gt; 4   2700  10462 Weekday  6.850282     14.619859       100.15015</span>
<span class="co">#&gt; 5   2700  10512 Weekday  6.075674      5.071986        30.81574</span>
<span class="co">#&gt; 6   2700   5890 Weekday 10.771731     31.585355       340.22893</span>
<span class="co">#&gt;            entry_time</span>
<span class="co">#&gt; 1 2014-04-28 06:07:27</span>
<span class="co">#&gt; 2 2014-04-28 06:07:41</span>
<span class="co">#&gt; 3 2014-04-28 06:07:58</span>
<span class="co">#&gt; 4 2014-04-28 06:08:07</span>
<span class="co">#&gt; 5 2014-04-28 06:08:21</span>
<span class="co">#&gt; 6 2014-04-28 06:08:26</span></code></pre></div>
<p>Travel data is organized around the notions of <em>trips</em> and <em>links</em>. Links are road segments each with well-defined beginning and end points and which can be traversed. A vehicle performs a trip when it travels from a start point to an end point through a sequence of links. Thus trips can be considered as ordered sequences of links. <code>trips</code> includes data for a collection of trips.</p>
<ul>
<li><p>Field <code>tripID</code> contains each <em>trip</em>'s ID, whereas field <code>linkID</code> contains the IDs of each <em>link</em> making up a trip. Both fields need to be numerical. It is assumed that, in the data set, all trips are grouped together and all links of a given trip appear in the order in which they are traversed (No verification is performed to that effect). A given link corresponds to some physical entity such as a road segment, a portion of a road segment, or any combination of those. Hence, it is expected that links are used in more than one trip.</p></li>
<li><p>Field <code>timeBin</code> (character string, or factor) refers to the time &quot;category&quot; when the traversal of a given link occurred. Time bins should reflect as much as possible time periods of the week encompassing similar traffic classes. In <code>trips</code> we define five time bins: <code>Weekday</code>, <code>MorningRush</code>, <code>EveningRush</code>, <code>EveningNight</code> and <code>Weekendday</code>.</p></li>
</ul>
<table class="table" style="margin-left: auto; margin-right: auto;">
<caption>
Table 1 - Example from <code>trips</code> : Time bin by period of the week
</caption>
<thead>
<tr>
<th style="text-align:left;">
Period of the week
</th>
<th style="text-align:left;">
Time bin
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Mon - Fri outside rush hour
</td>
<td style="text-align:left;">
Weekday
</td>
</tr>
<tr>
<td style="text-align:left;">
Mon - Fri, 7AM - 9AM
</td>
<td style="text-align:left;">
MorningRush
</td>
</tr>
<tr>
<td style="text-align:left;">
Mon - Fri, 3PM - 6PM
</td>
<td style="text-align:left;">
EveningRush
</td>
</tr>
<tr>
<td style="text-align:left;">
Sat 9AM - 9PM + Sun 9AM - 7PM
</td>
<td style="text-align:left;">
Weekendday
</td>
</tr>
<tr>
<td style="text-align:left;">
Sat - Sun otherwise
</td>
<td style="text-align:left;">
EveningNight
</td>
</tr>
</tbody>
</table>
<ul>
<li><p>Field <code>logspeed</code> contains the natural logarithm of the <em>speed</em> (in meter/second) of traversal of each link. This information is central to the estimation algorithm.</p></li>
<li><p>Field <code>traveltime</code> refers to the traversal time (in seconds) of each link. This field is mostly for reference and is not used directly in the package.</p></li>
<li><p>Field <code>length</code> refers to the length (in meters) of each link. This information is used by the prediction algorithm.</p></li>
<li><p>Field <code>time</code> gives the entry time in POSIXct format for the traversal of a given link. Individual datums are not used directly; however, the start time of the very first traversal is likely to be useful for providing the start time of a whole trip to the prediction function. Field <code>time</code> determine the time bin for each link, as illustrated in Table 1.</p></li>
</ul>
<p><code>traveltimeCLT</code> includes functionality to convert time stamps to alternative time bins, please refer to <a href="Time%20bins">Time bins</a>.</p>
</div>
<div id="statistical-models" class="section level1">
<h1><span class="header-section-number">3</span> Statistical models</h1>
<p><strong>This section should include a detailed description of the statistical/mathematical methods implemented in the package.</strong></p>
<div id="calling-traveltimeclt" class="section level2">
<h2><span class="header-section-number">3.1</span> Calling <code>traveltimeCLT</code></h2>
<p>The estimation algorithm can be executed by calling the <code>traveltimeCLT</code> function. The function's interface is as follows.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">traveltimeCLT</span>(data,
              <span class="dt">model =</span> <span class="kw">c</span>(<span class="st">'trip-specific'</span>, <span class="st">'population'</span>),
              <span class="dt">estimate =</span> <span class="kw">c</span>(<span class="st">'both'</span>, <span class="st">'mean-only'</span>),
              <span class="dt">lag =</span> 1L,
              <span class="dt">nsamples=</span>500L,
              <span class="dt">min.links=</span>5L,
              <span class="dt">timebin_rules =</span> <span class="ot">NULL</span>)</code></pre></div>
<p>For example, <code>traveltimeCLT</code> can be called using the <code>trips</code> <code>data.frame</code> as</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">fit &lt;-<span class="st"> </span><span class="kw">traveltimeCLT</span>(<span class="dt">data =</span> trips,<span class="dt">model =</span> <span class="st">'trip-specific'</span>, <span class="dt">estimate =</span> <span class="st">'both'</span>, <span class="dt">lag =</span> <span class="dv">1</span>, <span class="dt">nsamples =</span> <span class="dv">500</span>, <span class="dt">min.links =</span> <span class="dv">5</span>)</code></pre></div>
<p>Table 3 provides a description for each parameter.</p>
<table>
<caption>
Table 2 - Parameters for <code>traveltimeCLT</code>
</caption>
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:left;">
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
<code>data</code>
</td>
<td style="text-align:left;">
A data frame of trips and their road level travel information, formated as <code>trips</code>, see <code>trips</code> or <code>View(data(trips))</code>.
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>model</code>
</td>
<td style="text-align:left;">
Specifies whether the <code>trip-specific</code> or <code>population</code> models should be used.
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>estimate</code>
</td>
<td style="text-align:left;">
Specifies whether to estimate <code>both</code> the mean and variance or <code>mean-only</code>. Only applied with <code>model=trip-specific</code>.
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>lag</code>
</td>
<td style="text-align:left;">
Maximum lag at which to calculate the autocorrelations. Default is 1 for the first order-autocorrelations.
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>nsamples</code>
</td>
<td style="text-align:left;">
The number of trips to sample for parameter estimation.
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>min.links</code>
</td>
<td style="text-align:left;">
The minimum number of links in each of the sampled trip.
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>timebin_rules</code>
</td>
<td style="text-align:left;">
A list containing, start, end, days and tag for each timebin of the dataset (see example in <code>time_bins</code>).
</td>
</tr>
</tbody>
</table>
</div>
<div id="a-word-on-imputation" class="section level2">
<h2><span class="header-section-number">3.2</span> A word on imputation</h2>
<p><strong>This section is taken from the HMM repo, and must be checked for applicability to the new method.</strong></p>
<p>The implementation allows imputing for combinations of road links and time bins, for which the lack of sufficient observations prevents reliable parameter estimation. When imputation is required for a given combination, estimates for <span class="math inline">\(\mu\)</span>, <span class="math inline">\(\sigma\)</span>, <span class="math inline">\(\Gamma\)</span> and <span class="math inline">\(\gamma\)</span> are calculated on the basis of data available for the time bin involved <em>for all road links</em>.</p>
<p>This approach differs from the one in Woodard et.al.(2016), where imputation is performed on the basis of road classification data (e.g. &quot;arterial&quot; or &quot;primary collector road&quot;). This implementation does not handle road classification data.</p>
<p>Imputation is performed in the following three cases:</p>
<ul>
<li><p>Case 1: when a combination (<code>links x timebins</code>) has fewer than <code>L</code> <em>total observations</em>;</p></li>
<li><p>Case 2: when a combination has fewer than <code>L</code> <em>initial state observations only</em>;</p></li>
<li><p>Case 3: when a combination has only initial states.</p></li>
</ul>
<p>The number of observations specified in parameter <code>L</code> determines the threshold below which imputation occurs for cases 1 and 2.</p>
</div>
<div id="return-values" class="section level2">
<h2><span class="header-section-number">3.3</span> Return values</h2>
<p>The execution of <code>traveltimeCLT</code> returns a list of the parameters in Table 4.</p>
<table>
<caption>
Table 3 - Components of the list object returned by <code>traveltimeCLT</code>
</caption>
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:left;">
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
<code>network parameters</code>
</td>
<td style="text-align:left;">
to complete.
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>rho</code>
</td>
<td style="text-align:left;">
to complete.
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>residual variance</code>
</td>
<td style="text-align:left;">
to complete.
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>nsamples</code>
</td>
<td style="text-align:left;">
An integer corresponding to the number of trips sampled for parameter estimation., equal to the parameter <code>nsamples</code> that was passed in the function call.
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>min.links</code>
</td>
<td style="text-align:left;">
An integer corresponding to the minimum number of links for each sampled trip, equal to the parameter <code>min.links</code> that was passed in the function call.
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>lag</code>
</td>
<td style="text-align:left;">
An integer corresponding to the maximum lag for calculating the autocorrelations, equal to the parameter <code>lag</code> that was passed in the function call.
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>timebin_rules</code>
</td>
<td style="text-align:left;">
A list containing details of the utilized timebins. Equals <span class="math inline">\(NULL\)</span> if default timebins are used.
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>estimate</code>
</td>
<td style="text-align:left;">
A string specifying whether <code>both</code> the mean and variance or <code>mean-only</code> were calculated. Same as parameter <code>estimate</code> that was passed in the function call.
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>model</code>
</td>
<td style="text-align:left;">
A string indicating whether the <code>trip-specific</code> or <code>population</code> model was used. Same as the parameter <code>model</code> that was passed in the function call.
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="prediction" class="section level1">
<h1><span class="header-section-number">4</span> Prediction</h1>
<p><strong>This section should include a description of the methods used for prediction.</strong></p>
<div id="calling-predict.traveltime-or-predict" class="section level2">
<h2><span class="header-section-number">4.1</span> Calling <code>predict.traveltime</code> or <code>predict</code></h2>
<p>The prediction algorithm is executed by calling the <code>predict.traveltime</code>, or equivalently the <code>S3</code> method <code>predict</code>, which has the following interface:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">predict</span>(object,
        newdata,
        level,
        ...)</code></pre></div>
<p>For example, we can randomly select 10 trips from the dataset <code>trips</code> to use as the test data for prediction. Once these trips are selected, we use the remaining trips to estimate the model by calling <code>traveltimeCLT</code>. The output of <code>traveltimeCLT</code> and the test data are then passed to predict to generate predictions for the 10 randomly sampled trips.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">test_trips =<span class="st"> </span><span class="kw">sample_trips</span>(trips, <span class="dv">10</span>)
train =<span class="st"> </span>trips[<span class="op">!</span>trips<span class="op">$</span>tripID <span class="op">%in%</span><span class="st"> </span>test_trips,]
test =<span class="st">  </span>trips[trips<span class="op">$</span>tripID <span class="op">%in%</span><span class="st"> </span>test_trips,]

fit &lt;-<span class="st"> </span><span class="kw">traveltimeCLT</span>(train, <span class="dt">lag =</span> <span class="dv">1</span>)
pred &lt;-<span class="st"> </span><span class="kw">predict</span>(fit, test, <span class="fl">0.95</span>)</code></pre></div>
<p>Table 5 provides a description for each parameter.</p>
<table>
<caption>
Table 4 - Parameters for <code>predict.traveltime</code>
</caption>
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:left;">
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
<code>object</code>
</td>
<td style="text-align:left;">
A list object corresponding to the output <code>traveltimeCLT</code>, of class <code>traveltimeCLT</code>.
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>newdata</code>
</td>
<td style="text-align:left;">
A data frame of new trips and their road level travel information, formatted as <code>trips</code>, see <code>trips</code> or <code>data(trips); View(trips)</code>.
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>levels</code>
</td>
<td style="text-align:left;">
Significance levels. Default is 0.95.
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>...</code>
</td>
<td style="text-align:left;">
For passing extra parameters, for example, time bin rules to be passed to <code>rules2timebins</code>, see <code>rules2timebins</code> in the trip-specific method.
</td>
</tr>
</tbody>
</table>
</div>
<div id="return-values-1" class="section level2">
<h2><span class="header-section-number">4.2</span> Return values</h2>
<p><code>predict.traveltime</code> returns a vector of length <code>n</code>, where <code>n</code> is the number of trips passed to <code>predict</code>. For each trip, <code>predict</code> returns the tripID, ETA (trip length in seconds), variance, and the lower and upper bounds of the confidence interval of travel time, according to the specified significance level. The output for the above example is provided below.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">pred &lt;-<span class="st"> </span><span class="kw">predict</span>(fit, test, <span class="fl">0.95</span>)
<span class="kw">print</span>(pred)
    tripID        ETA   variance        lwr       upr
<span class="dv">1</span>    <span class="dv">11273</span> <span class="fl">1734.00888</span>  <span class="fl">30990.369</span> <span class="fl">1343.40284</span> <span class="fl">2124.6149</span>
<span class="dv">2</span>    <span class="dv">11396</span>  <span class="fl">784.61539</span>  <span class="fl">26200.146</span>  <span class="fl">425.46409</span> <span class="fl">1143.7667</span>
<span class="dv">3</span>    <span class="dv">13922</span> <span class="fl">1277.75451</span> <span class="fl">152802.053</span>  <span class="fl">410.41290</span> <span class="fl">2145.0961</span>
<span class="dv">4</span>    <span class="dv">21978</span> <span class="fl">1266.31193</span>  <span class="fl">23227.051</span>  <span class="fl">928.15163</span> <span class="fl">1604.4722</span>
<span class="dv">5</span>  <span class="dv">1000165</span>   <span class="fl">55.26015</span>   <span class="fl">1175.211</span>  <span class="op">-</span><span class="fl">20.80462</span>  <span class="fl">131.3249</span>
<span class="dv">6</span>  <span class="dv">1002992</span>  <span class="fl">947.83252</span>   <span class="fl">6023.799</span>  <span class="fl">775.62154</span> <span class="fl">1120.0435</span>
<span class="dv">7</span>  <span class="dv">1003992</span> <span class="fl">1931.34743</span>  <span class="fl">62290.712</span> <span class="fl">1377.56748</span> <span class="fl">2485.1274</span>
<span class="dv">8</span>  <span class="dv">1005895</span> <span class="fl">1247.47739</span>  <span class="fl">23665.694</span>  <span class="fl">906.13895</span> <span class="fl">1588.8158</span>
<span class="dv">9</span>  <span class="dv">2001730</span> <span class="fl">1549.57224</span>  <span class="fl">39551.002</span> <span class="fl">1108.30231</span> <span class="fl">1990.8422</span>
<span class="dv">10</span> <span class="dv">2004090</span> <span class="fl">2244.24231</span> <span class="fl">695368.988</span>  <span class="fl">393.98024</span> <span class="fl">4094.5044</span></code></pre></div>
</div>
</div>
<div id="model-comparison" class="section level1">
<h1><span class="header-section-number">5</span> Model comparison</h1>
<p><strong>This section should include a discussion on the trip-specific vs population models.</strong></p>
</div>
<div id="time-bins" class="section level1">
<h1><span class="header-section-number">6</span> Time bins</h1>
<p>To specify different time bins than the ones supplied, <code>traveltimeHMM</code> provides a functional method called <code>rules2timebins()</code> that translates human readable weekly time bins to a conversion function.</p>
<p><code>rules2timebins()</code> takes a list of lists of time bin rules, where each sub-list specifies 4 variables, <code>start</code> and <code>end</code>as the start and end time of a time bin in 24h format, <code>days</code> as a vector specifying the weekdays this time bin applies to, <code>1</code> for Sunday, and <code>2:5</code> for weekdays, and finally a <code>tag</code> to specify a name for the time bin.</p>
<p>For example,</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">rules =<span class="st"> </span><span class="kw">list</span>(
    <span class="kw">list</span>(<span class="dt">start=</span><span class="st">'6:30'</span>,  <span class="dt">end=</span> <span class="st">'9:00'</span>,  <span class="dt">days =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">5</span>, <span class="dt">tag=</span><span class="st">'MR'</span>),
    <span class="kw">list</span>(<span class="dt">start=</span><span class="st">'15:00'</span>, <span class="dt">end=</span> <span class="st">'18:00'</span>, <span class="dt">days =</span> <span class="dv">2</span><span class="op">:</span><span class="dv">5</span>, <span class="dt">tag=</span><span class="st">'ER'</span>)
)</code></pre></div>
<p>specifies two time bins calls <code>MR</code> for morning rush, and <code>ER</code> for evening rush, the former is for all weekdays and the latter is for Tuesdays to Fridays. All other time intervals are assigned a time bin called <code>Other</code>.</p>
<p>Passing <code>rules</code> to <code>rules2timebins()</code> would return an easy to use functional, for example</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">time_bins &lt;-<span class="st"> </span><span class="kw">rules2timebins</span>(rules)
<span class="kw">time_bins</span>(<span class="st">&quot;2019-08-16 15:25:00 EDT&quot;</span>) ## Friday
[<span class="dv">1</span>] <span class="st">&quot;ER&quot;</span>
<span class="kw">time_bins</span>(<span class="st">&quot;2019-08-17 21:25:58 EDT&quot;</span>) ## Saturday
[<span class="dv">1</span>] <span class="st">&quot;Other&quot;</span></code></pre></div>
<p>To change the time bins in <code>trips</code>, run the code</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">trips<span class="op">$</span>timeBin &lt;-<span class="st"> </span><span class="kw">time_bins</span>(trips<span class="op">$</span>time)
<span class="kw">head</span>(trips)
  tripID linkID timeBin logspeed traveltime    length                time
<span class="dv">1</span>   <span class="dv">2700</span>  <span class="dv">10469</span>   Other <span class="fl">1.692292</span>  <span class="fl">13.000000</span>  <span class="fl">70.61488</span> <span class="dv">2014</span><span class="op">-</span><span class="dv">04</span><span class="op">-</span><span class="dv">28</span> <span class="dv">06</span><span class="op">:</span><span class="dv">07</span><span class="op">:</span><span class="dv">27</span>
<span class="dv">2</span>   <span class="dv">2700</span>  <span class="dv">10444</span>   Other <span class="fl">2.221321</span>  <span class="fl">18.927792</span> <span class="fl">174.50487</span> <span class="dv">2014</span><span class="op">-</span><span class="dv">04</span><span class="op">-</span><span class="dv">28</span> <span class="dv">06</span><span class="op">:</span><span class="dv">07</span><span class="op">:</span><span class="dv">41</span>
<span class="dv">3</span>   <span class="dv">2700</span>  <span class="dv">10460</span>   Other <span class="fl">2.203074</span>   <span class="fl">8.589937</span>  <span class="fl">77.76295</span> <span class="dv">2014</span><span class="op">-</span><span class="dv">04</span><span class="op">-</span><span class="dv">28</span> <span class="dv">06</span><span class="op">:</span><span class="dv">07</span><span class="op">:</span><span class="dv">58</span>
<span class="dv">4</span>   <span class="dv">2700</span>  <span class="dv">10462</span>   Other <span class="fl">1.924290</span>  <span class="fl">14.619859</span> <span class="fl">100.15015</span> <span class="dv">2014</span><span class="op">-</span><span class="dv">04</span><span class="op">-</span><span class="dv">28</span> <span class="dv">06</span><span class="op">:</span><span class="dv">08</span><span class="op">:</span><span class="dv">07</span>
<span class="dv">5</span>   <span class="dv">2700</span>  <span class="dv">10512</span>   Other <span class="fl">1.804293</span>   <span class="fl">5.071986</span>  <span class="fl">30.81574</span> <span class="dv">2014</span><span class="op">-</span><span class="dv">04</span><span class="op">-</span><span class="dv">28</span> <span class="dv">06</span><span class="op">:</span><span class="dv">08</span><span class="op">:</span><span class="dv">21</span>
<span class="dv">6</span>   <span class="dv">2700</span>   <span class="dv">5890</span>   Other <span class="fl">2.376925</span>  <span class="fl">31.585355</span> <span class="fl">340.22893</span> <span class="dv">2014</span><span class="op">-</span><span class="dv">04</span><span class="op">-</span><span class="dv">28</span> <span class="dv">06</span><span class="op">:</span><span class="dv">08</span><span class="op">:</span><span class="dv">26</span></code></pre></div>
<p><em><em>Remark</em></em>: at package loading a default <code>time_bins()</code> functional is created, which constructs the default time bins of <code>trips</code>.</p>
<div id="prediction-with-new-time-bins" class="section level2">
<h2><span class="header-section-number">6.1</span> Prediction with new time bins</h2>
<p>Running the <code>trip-specific</code> model in <code>traveltimeCLT</code> with user-defined time bins requires several steps. First, the user defines the time bin rules and converts them to a functional using <code>rules2timebins</code></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">rules =<span class="st"> </span><span class="kw">list</span>(
    <span class="kw">list</span>(<span class="dt">start=</span><span class="st">'6:30'</span>,  <span class="dt">end=</span> <span class="st">'9:00'</span>,  <span class="dt">days =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">5</span>, <span class="dt">tag=</span><span class="st">'MR'</span>),
    <span class="kw">list</span>(<span class="dt">start=</span><span class="st">'15:00'</span>, <span class="dt">end=</span> <span class="st">'18:00'</span>, <span class="dt">days =</span> <span class="dv">2</span><span class="op">:</span><span class="dv">5</span>, <span class="dt">tag=</span><span class="st">'ER'</span>)
)

time_bins &lt;-<span class="st"> </span><span class="kw">rules2timebins</span>(rules)</code></pre></div>
<p>Second, the time bins are applied to the data, and trips are divided into training and testing sets.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">trips<span class="op">$</span>timeBin &lt;-<span class="st"> </span><span class="kw">time_bins</span>(trips<span class="op">$</span>time)

test_trips =<span class="st"> </span><span class="kw">sample_trips</span>(trips, <span class="dv">10</span>)
train =<span class="st"> </span>trips[<span class="op">!</span>trips<span class="op">$</span>tripID <span class="op">%in%</span><span class="st"> </span>test_trips,]
test =<span class="st">  </span>trips[trips<span class="op">$</span>tripID <span class="op">%in%</span><span class="st"> </span>test_trips,]</code></pre></div>
<p>Third, the <code>timebin_rules</code> are passed to <code>traveltime_CLT</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">fit &lt;-<span class="st"> </span><span class="kw">traveltimeCLT</span>(train, <span class="dt">lag =</span> <span class="dv">1</span>, <span class="dt">timebin_rules =</span> rules)</code></pre></div>
<p>Fourth, the <code>timebin_rules</code> are again passed to <code>predict</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">pred &lt;-<span class="st"> </span><span class="kw">predict</span>(fit, test, <span class="fl">0.95</span>, rules)</code></pre></div>
<p>In order to esitmate the <code>population</code> model with user-defined time bins, the data must initially be subset according to the desired time bin, before fitting using <code>traveltimeCLT</code>. This is necessitated because the <code>population</code> model randomnly samples the data without consideration for time bins. Once user-defined time bins are applied to the data, the <code>population</code> modeln can be fit as below.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">morning_rush_trips =<span class="st">  </span>trips[trips<span class="op">$</span>timeBin<span class="op">==</span><span class="st">&quot;MR&quot;</span>,]

test_trips =<span class="st"> </span><span class="kw">sample_trips</span>(trips, <span class="dv">10</span>)

train =<span class="st"> </span>trips[<span class="op">!</span>morning_rush_trips<span class="op">$</span>tripID <span class="op">%in%</span><span class="st"> </span>test_trips,]
test =<span class="st">  </span>trips[morning_rush_trips<span class="op">$</span>tripID <span class="op">%in%</span><span class="st"> </span>test_trips,]

fit &lt;-<span class="st"> </span><span class="kw">traveltimeCLT</span>(train, <span class="dt">lag =</span> <span class="dv">1</span>, <span class="dt">model =</span> population, <span class="dt">timebin_rules =</span> rules)

pred &lt;-<span class="st"> </span><span class="kw">predict</span>(fit, test, <span class="fl">0.95</span>, rules)</code></pre></div>
</div>
</div>
<div id="references" class="section level1">
<h1><span class="header-section-number">7</span> References</h1>
<p>Woodard, D., Nogin, G., Koch, P., Racz, D., Goldszmidt, M., Horvitz, E., 2017. &quot;Predicting travel time reliability using mobile phone GPS data&quot;. <em>Transportation Research Part C</em>, 75, 30-44. <a href="http://dx.doi.org/10.1016/j.trc.2016.10.011" class="uri">http://dx.doi.org/10.1016/j.trc.2016.10.011</a></p>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>

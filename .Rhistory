devtools::document()
devtools::document()
devtools::document()
devtools::install()
knitr::opts_chunk$set(echo = TRUE)
#source("traveltimeCLTfunctions.R")
#devtools::document()
#devtools::install()
#devtools::install_github("Mingze-Li0625/traveltimeCLT", force = TRUE)
library(traveltimeCLT)
library(data.table)
data(trips)
trips2=data.table(trips)
names(trips2)[c(1,2,5,6,7)]<-c("trip","linkId","duration","length","time")
trips= fread('data/trips.csv')
trips$time <- as.POSIXct(trips$time)
timeBin_x_edges=get_timeBin_x_edges(trips)
id <- sample(unique(trips$trip),1000)
sampled_1000_trips <- trips[trip %in% id, c("trip", "linkId", "time")]
sampled_1000_trips$timeBin<-time_bins_readable(sampled_1000_trips$time)
sampled_1000_trips$time<-NULL
sampled_1000_trips<-merge(sampled_1000_trips, timeBin_x_edges, by = c("linkId", "timeBin"), all.x = TRUE)
sampled_1000_trips<-na.omit(sampled_1000_trips)
sampled_time<-data.table(tripID=unique(sampled_1000_trips$trip),real_time=trips[trip %in%id, .(time[.N]-time[1]),trip]$V1)
sampled_time$real_time<-as.numeric(sampled_time$real_time)
sampled_time$dependent_time<-sampled_1000_trips[,.(sum(exp(mean+sd*qnorm(dependent_uniform(.N))))),trip]$V1
sampled_time$independent_time<-sampled_1000_trips[,.(sum(exp(mean+sd*qnorm(runif(.N))))),trip]$V1
plot_CDF_compare(sampled_time$real_time,sampled_time$dependent_time,"dependent data")
timeBin_x_edges=get_timeBin_x_edges(tripID=trips$trip,time=trips$time,linkId=trips$linkId,length = trips$length)
View(timeBin_x_edges)
timeBin_x_connections=get_timeBin_x_connections(trips)
View(timeBin_x_connections)
id <- sample(unique(trips$trip),20)
sampledtrips <- trips[trip %in%id, ]
p=plot_metric_graph(sampledtrips)
?tidygraph
?V
devtools::document()
devtools::install()
knitr::opts_chunk$set(echo = TRUE)
#source("traveltimeCLTfunctions.R")
#devtools::document()
#devtools::install()
#devtools::install_github("Mingze-Li0625/traveltimeCLT", force = TRUE)
library(traveltimeCLT)
library(data.table)
data(trips)
trips2=data.table(trips)
names(trips2)[c(1,2,5,6,7)]<-c("trip","linkId","duration","length","time")
trips= fread('data/trips.csv')
trips$time <- as.POSIXct(trips$time)
timeBin_x_edges=get_timeBin_x_edges(trips)
knitr::opts_chunk$set(echo = TRUE)
#source("traveltimeCLTfunctions.R")
#devtools::document()
#devtools::install()
#devtools::install_github("Mingze-Li0625/traveltimeCLT", force = TRUE)
library(traveltimeCLT)
library(data.table)
data(trips)
trips2=data.table(trips)
names(trips2)[c(1,2,5,6,7)]<-c("trip","linkId","duration","length","time")
trips= fread('data/trips.csv')
trips$time <- as.POSIXct(trips$time)
timeBin_x_edges=get_timeBin_x_edges(trips)
remove.packages("traveltimeCLT")
devtools::install()
devtools::install()
3
knitr::opts_chunk$set(echo = TRUE)
#source("traveltimeCLTfunctions.R")
#devtools::document()
#remove.packages("traveltimeCLT")
#devtools::install()
#devtools::install_github("Mingze-Li0625/traveltimeCLT", force = TRUE)
library(traveltimeCLT)
library(data.table)
data(trips)
trips2=data.table(trips)
names(trips2)[c(1,2,5,6,7)]<-c("trip","linkId","duration","length","time")
trips= fread('data/trips.csv')
trips$time <- as.POSIXct(trips$time)
timeBin_x_edges=get_timeBin_x_edges(trips)
id <- sample(unique(trips$trip),1000)
sampled_1000_trips <- trips[trip %in% id, c("trip", "linkId", "time")]
sampled_1000_trips$timeBin<-time_bins_readable(sampled_1000_trips$time)
sampled_1000_trips$time<-NULL
sampled_1000_trips<-merge(sampled_1000_trips, timeBin_x_edges, by = c("linkId", "timeBin"), all.x = TRUE)
sampled_1000_trips<-na.omit(sampled_1000_trips)
sampled_time<-data.table(tripID=unique(sampled_1000_trips$trip),real_time=trips[trip %in%id, .(time[.N]-time[1]),trip]$V1)
sampled_time$real_time<-as.numeric(sampled_time$real_time)
sampled_time$dependent_time<-sampled_1000_trips[,.(sum(exp(mean+sd*qnorm(dependent_uniform(.N))))),trip]$V1
sampled_time$independent_time<-sampled_1000_trips[,.(sum(exp(mean+sd*qnorm(runif(.N))))),trip]$V1
plot_CDF_compare(sampled_time$real_time,sampled_time$dependent_time,"dependent data")
timeBin_x_edges=get_timeBin_x_edges(tripID=trips$trip,time=trips$time,linkId=trips$linkId,length = trips$length)
View(timeBin_x_edges)
timeBin_x_connections=get_timeBin_x_connections(trips)
View(timeBin_x_connections)
id <- sample(unique(trips$trip),20)
sampledtrips <- trips[trip %in%id, ]
p=plot_metric_graph(sampledtrips)
？all_simple_paths
?all_simple_paths
devtools::document()
#remove.packages("traveltimeCLT")
#devtools::install()
remove.packages("traveltimeCLT")
devtools::install()
knitr::opts_chunk$set(echo = TRUE)
#source("traveltimeCLTfunctions.R")
#devtools::document()
remove.packages("traveltimeCLT")
devtools::install()
knitr::opts_chunk$set(echo = TRUE)
#source("traveltimeCLTfunctions.R")
#devtools::document()
# remove.packages("traveltimeCLT")
# devtools::install()
#devtools::install_github("Mingze-Li0625/traveltimeCLT", force = TRUE)
library(traveltimeCLT)
library(data.table)
data(trips)
knitr::opts_chunk$set(echo = TRUE)
#source("traveltimeCLTfunctions.R")
#devtools::document()
# remove.packages("traveltimeCLT")
# devtools::install()
#devtools::install_github("Mingze-Li0625/traveltimeCLT", force = TRUE)
library(traveltimeCLT)
library(data.table)
data(trips)
trips2=data.table(trips)
names(trips2)[c(1,2,5,6,7)]<-c("trip","linkId","duration","length","time")
knitr::opts_chunk$set(echo = TRUE)
#source("traveltimeCLTfunctions.R")
#devtools::document()
# remove.packages("traveltimeCLT")
# devtools::install()
#devtools::install_github("Mingze-Li0625/traveltimeCLT", force = TRUE)
library(traveltimeCLT)
devtools::install()
knitr::opts_chunk$set(echo = TRUE)
#source("traveltimeCLTfunctions.R")
#devtools::document()
# remove.packages("traveltimeCLT")
# devtools::install()
#devtools::install_github("Mingze-Li0625/traveltimeCLT", force = TRUE)
library(traveltimeCLT)
library(data.table)
data(trips)
trips2=data.table(trips)
names(trips2)[c(1,2,5,6,7)]<-c("trip","linkId","duration","length","time")
trips= fread('data/trips.csv')
trips$time <- as.POSIXct(trips$time)
timeBin_x_edges=get_timeBin_x_edges(trips)
id <- sample(unique(trips$trip),1000)
sampled_1000_trips <- trips[trip %in% id, c("trip", "linkId", "time")]
sampled_1000_trips$timeBin<-time_bins_readable(sampled_1000_trips$time)
sampled_1000_trips$time<-NULL
sampled_1000_trips<-merge(sampled_1000_trips, timeBin_x_edges, by = c("linkId", "timeBin"), all.x = TRUE)
sampled_1000_trips<-na.omit(sampled_1000_trips)
sampled_time<-data.table(tripID=unique(sampled_1000_trips$trip),real_time=trips[trip %in%id, .(time[.N]-time[1]),trip]$V1)
sampled_time$real_time<-as.numeric(sampled_time$real_time)
sampled_time$dependent_time<-sampled_1000_trips[,.(sum(exp(mean+sd*qnorm(dependent_uniform(.N))))),trip]$V1
sampled_time$independent_time<-sampled_1000_trips[,.(sum(exp(mean+sd*qnorm(runif(.N))))),trip]$V1
plot_CDF_compare(sampled_time$real_time,sampled_time$dependent_time,"dependent data")
timeBin_x_edges=get_timeBin_x_edges(tripID=trips$trip,time=trips$time,linkId=trips$linkId,length = trips$length)
View(timeBin_x_edges)
timeBin_x_connections=get_timeBin_x_connections(trips)
View(timeBin_x_connections)
id <- sample(unique(trips$trip),20)
sampledtrips <- trips[trip %in%id, ]
p=plot_metric_graph(sampledtrips)
p
graphs<-get_metric_graph(timeBin_x_connections)
？simplify
?simplify
?E
?k_shortest_paths
devtools::document()
remove.packages("traveltimeCLT")
devtools::install()
devtools::install()
devtools::document()
devtools::install()
knitr::opts_chunk$set(echo = TRUE)
#source("traveltimeCLTfunctions.R")
#devtools::document()
# remove.packages("traveltimeCLT")
# devtools::install()
#devtools::install_github("Mingze-Li0625/traveltimeCLT", force = TRUE)
library(traveltimeCLT)
library(data.table)
data(trips)
trips2=data.table(trips)
names(trips2)[c(1,2,5,6,7)]<-c("trip","linkId","duration","length","time")
trips= fread('data/trips.csv')
trips$time <- as.POSIXct(trips$time)
timeBin_x_edges=get_timeBin_x_edges(trips)
id <- sample(unique(trips$trip),1000)
sampled_1000_trips <- trips[trip %in% id, c("trip", "linkId", "time")]
sampled_1000_trips$timeBin<-time_bins_readable(sampled_1000_trips$time)
sampled_1000_trips$time<-NULL
sampled_1000_trips<-merge(sampled_1000_trips, timeBin_x_edges, by = c("linkId", "timeBin"), all.x = TRUE)
sampled_1000_trips<-na.omit(sampled_1000_trips)
sampled_time<-data.table(tripID=unique(sampled_1000_trips$trip),real_time=trips[trip %in%id, .(time[.N]-time[1]),trip]$V1)
sampled_time$real_time<-as.numeric(sampled_time$real_time)
sampled_time$dependent_time<-sampled_1000_trips[,.(sum(exp(mean+sd*qnorm(dependent_uniform(.N))))),trip]$V1
sampled_time$independent_time<-sampled_1000_trips[,.(sum(exp(mean+sd*qnorm(runif(.N))))),trip]$V1
plot_CDF_compare(sampled_time$real_time,sampled_time$dependent_time,"dependent data")
timeBin_x_edges=get_timeBin_x_edges(tripID=trips$trip,time=trips$time,linkId=trips$linkId,length = trips$length)
View(timeBin_x_edges)
timeBin_x_connections=get_timeBin_x_connections(trips)
View(timeBin_x_connections)
id <- sample(unique(trips$trip),20)
sampledtrips <- trips[trip %in%id, ]
p=plot_metric_graph(sampledtrips)
p
graphs<-get_metric_graph(timeBin_x_connections)
x=findRoute(graphs,6494,1,2)
x
x_time=path_time(x$oneway,timeBin_x_connections)
x_time
b=findRoute(graphs,123,321,2)
path_time(b$twoway,timeBin_x_connections,time="2023-09-01 14:15:02","Dependent",0.2)
path_length(b$twoway,timeBin_x_connections)
remove.packages("traveltimeCLT")
knitr::opts_chunk$set(echo = TRUE)
#source("traveltimeCLTfunctions.R")
#devtools::document()
# remove.packages("traveltimeCLT")
# devtools::install()
#devtools::install_github("Mingze-Li0625/traveltimeCLT", force = TRUE)
library(traveltimeCLT)
devtools::install_github("Mingze-Li0625/traveltimeCLT", force = TRUE)
knitr::opts_chunk$set(echo = TRUE)
#source("traveltimeCLTfunctions.R")
#devtools::document()
# remove.packages("traveltimeCLT")
# devtools::install()
#devtools::install_github("Mingze-Li0625/traveltimeCLT", force = TRUE)
library(traveltimeCLT)
library(data.table)
data(trips)
trips2=data.table(trips)
names(trips2)[c(1,2,5,6,7)]<-c("trip","linkId","duration","length","time")
trips= fread('data/trips.csv')
trips$time <- as.POSIXct(trips$time)
timeBin_x_edges=get_timeBin_x_edges(trips)
id <- sample(unique(trips$trip),1000)
sampled_1000_trips <- trips[trip %in% id, c("trip", "linkId", "time")]
sampled_1000_trips$timeBin<-time_bins_readable(sampled_1000_trips$time)
sampled_1000_trips$time<-NULL
sampled_1000_trips<-merge(sampled_1000_trips, timeBin_x_edges, by = c("linkId", "timeBin"), all.x = TRUE)
sampled_1000_trips<-na.omit(sampled_1000_trips)
sampled_time<-data.table(tripID=unique(sampled_1000_trips$trip),real_time=trips[trip %in%id, .(time[.N]-time[1]),trip]$V1)
sampled_time$real_time<-as.numeric(sampled_time$real_time)
sampled_time$dependent_time<-sampled_1000_trips[,.(sum(exp(mean+sd*qnorm(dependent_uniform(.N))))),trip]$V1
sampled_time$independent_time<-sampled_1000_trips[,.(sum(exp(mean+sd*qnorm(runif(.N))))),trip]$V1
plot_CDF_compare(sampled_time$real_time,sampled_time$dependent_time,"dependent data")
timeBin_x_edges=get_timeBin_x_edges(tripID=trips$trip,time=trips$time,linkId=trips$linkId,length = trips$length)
View(timeBin_x_edges)
timeBin_x_connections=get_timeBin_x_connections(trips)
View(timeBin_x_connections)
id <- sample(unique(trips$trip),20)
sampledtrips <- trips[trip %in%id, ]
p=plot_metric_graph(sampledtrips)
p
graphs<-get_metric_graph(timeBin_x_connections)
x=findRoute(graphs,6494,1,2)
x
x_time=path_time(x$oneway,timeBin_x_connections)
x_time
b=findRoute(graphs,123,321,2)
path_time(b$twoway,timeBin_x_connections,time="2023-09-01 14:15:02","Dependent",0.2)
path_length(b$twoway,timeBin_x_connections)
